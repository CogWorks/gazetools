language: c

before_install:
  - curl -OL http://raw.github.com/craigcitro/r-travis/master/scripts/travis-tool.sh
  - chmod 755 ./travis-tool.sh
  - ./travis-tool.sh bootstrap

install:
  - ./travis-tool.sh r_binary_install colorspace RColorBrewer dichromat munsell labeling SparseM Formula sp mvtnorm TH.data sandwich truncnorm gamlss.data quadprog gtable scales proto quantreg Hmisc mapproj maps hexbin maptools multcomp Rsolnp gamlss gamlss.dist pracma coda chron DAAG fts its mondate strucchange timeDate timeSeries tis tseries xts latticeExtra reshape2 depmixS4 signal ggplot2
  - ./travis-tool.sh install_deps

script: ./travis-tool.sh run_tests

on_failure:
  - ./travis-tool.sh dump_logs

notifications:
  email:
    on_success: change
    on_failure: change

secure: "BmxOV0lt4pKQT4ucCPX7rAVq73qdLGGE2zZB/koQmbYUrs/+t5sa5pmsL8tZPo9j9nYSVr7PnUwrI4hbNmHaEUddbiLbz1a5YqSmGl7bUN8w2yfSl0kG21ItHE0fzT0IUWOKGDICzIXVQBYJHRfC7Mi4tFgbXRQpymP7/fikXsQ="

before_deploy:
  - ./travis-tool.sh install_github ryanhope/staticdocs
  - R -e "require(staticdocs); build_package('.','inst/web')"

after_success:
- .utility/initiate-publish.sh